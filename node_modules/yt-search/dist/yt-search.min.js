!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ytSearch=e()}}(function(){return function o(a,l,u){function s(t,e){if(!l[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(f)return f(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=l[t]={exports:{}};a[t][0].call(i.exports,function(e){return s(a[t][1][e]||e)},i,i.exports,o,a,l,u)}return l[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,r){"use strict";var n,R=e("cheerio"),u=e("dasu"),s=e("async.parallellimit"),f=e("url"),c=e("querystring"),i="https://www.youtube.com/results?",d={YT_SEARCH_QUERY_URI:"",hl:"en",gl:"US",category:"",pageStart:1,pageEnd:3};function o(o,l){var a=Object.assign({},d);if(!o)return l(new Error("No query given."));if(!(a="string"==typeof o?Object.assign(a,{query:o}):Object.assign(a,o)).YT_SEARCH_QUERY_URI){var e=i,t=a.hl||a.language||a.lang;t&&(e+="&hl="+t.slice(0,2)),a.gl&&(e+="&gl="+a.gl),a.category&&(e+="&category="+a.category),a.YT_SEARCH_QUERY_URI=e}o=a.query||a.search,function(){for(var e=c.escape(o).split(/\s+/),n=a.YT_SEARCH_QUERY_URI+"&search_query="+e.join("+"),r=[],t=function(e){var t=e;r.push(function(r){!function(e,t,n){e+="&page="+t;var r=f.parse(e);u.req(r,function(e,t,r){e?n(e):function(e,t){for(var r=R.load(e),n=r(".yt-lockup-content"),i=[],o=0;o<n.length;o++){var a=n[o],l=r(".yt-lockup-title",a),u=r("a",l),s=r("span",l),f=b(s.text()),c=u.attr("href")||"";if(0===c.indexOf("/watch?")||0===c.indexOf("/user/")||0===c.indexOf("/channel/")){var d=c.split("=")[1],p=r(".yt-lockup-meta-info",a),g=r("li",p),h=r(g[0]).text(),v=r(g[1]).text(),m=Number(v.split(" ")[0].split(",").join("").trim()),y=r('a[href^="/user/"]',a),x=(y.attr("href")||"").replace("/user/",""),w=y.text(),_=r('a[href^="/channel/"]',a),O=(_.attr("href")||"").replace("/channel/",""),E=_.text(),U={title:u.text(),url:c,videoId:d,seconds:Number(f.seconds),timestamp:f.timestamp,duration:f,ago:h,views:Number(m),author:{name:w||E,id:x||O,url:y.attr("href")||_.attr("href"),userId:x,userName:w,userUrl:y.attr("href")||"",channelId:O,channelName:E,channelUrl:_.attr("href")||""}};i.push(U)}}t(null,i)}(r,n)})}(n,t,function(e,t){e?r(e):r(null,t)})})},i=a.pageStart;i<a.pageEnd;i++)t(i);s(r,3,function(e,t){if(e)l(e);else{for(var r=[],n=0;n<t.length;n++)r=r.concat(t[0]);var i=r.filter(p),o=r.filter(h),a=r.filter(v);l(null,{videos:i.filter(g),playlists:o,accounts:a})}})}()}function p(e){return 0<=e.url.indexOf("watch")&&-1===e.url.indexOf("&list")&&-1===e.url.indexOf("&user")}function g(e,t,r){var n=e.videoId;return r.findIndex(function(e){return n===e.videoId})===t}function h(e){return 0<=e.url.indexOf("list")}function v(e){return 0<=e.url.indexOf("user")}function b(e){var t=e.split(/\s+/),r=t[t.length-1].replace(/[^:.\d]/g,"");if(!r)return{toString:function(){return t[0]},seconds:0,timestamp:0};for(;r[r.length-1].match(/\D/);)r=r.slice(0,-1);for(var n=(r=r.replace(/\./g,":")).split(/[:.]/),i=0,o=0,a=n.length-1;0<=a;a--)if(!(n[a].length<=0)){var l=n[a].replace(/\D/g,"");if(i+=parseInt(l)*(0<o?Math.pow(60,o):1),2<++o)break}return{toString:function(){return i+" seconds ("+r+")"},seconds:i,timestamp:r}}t.exports=function(e,t){o(e,t)},t.exports.search=o,e.main===t&&(n="superman theme",console.log("doing list search"),o(n,function(e,t){if(e)throw e;var r=t.videos,n=t.playlists,i=t.accounts;console.log("videos: "+r.length),console.log("playlists: "+n.length),console.log("accounts: "+i.length);for(var o=0;o<3;o++){var a=r[o],l=" ("+a.timestamp+")";console.log(a.title+l)}}))},{"async.parallellimit":void 0,cheerio:void 0,dasu:void 0,querystring:void 0,url:void 0}]},{},[1])(1)});